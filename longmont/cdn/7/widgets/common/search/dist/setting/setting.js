System.register(["jimu-core","jimu-for-builder","jimu-ui/advanced/setting-components","jimu-ui","jimu-theme"],(function(e,t){var s={},n={},i={},a={},o={};return{setters:[function(e){s.Immutable=e.Immutable,s.LinkType=e.LinkType,s.React=e.React,s.css=e.css,s.defaultMessages=e.defaultMessages,s.jsx=e.jsx},function(e){n.getAppConfigAction=e.getAppConfigAction},function(e){i.LinkSelector=e.LinkSelector,i.OpenTypes=e.OpenTypes,i.SearchDataSetting=e.SearchDataSetting,i.SearchDataType=e.SearchDataType,i.SearchGeneralSetting=e.SearchGeneralSetting,i.SearchServiceType=e.SearchServiceType,i.SearchSuggestionSetting=e.SearchSuggestionSetting,i.SettingCollapse=e.SettingCollapse,i.SettingRow=e.SettingRow,i.SettingSection=e.SettingSection},function(e){a.Checkbox=e.Checkbox,a.Switch=e.Switch,a.TextInput=e.TextInput,a.defaultMessages=e.defaultMessages,a.hooks=e.hooks},function(e){o.useTheme=e.useTheme}],execute:function(){e((()=>{var e={48891:e=>{"use strict";e.exports=s},23137:e=>{"use strict";e.exports=n},34796:e=>{"use strict";e.exports=o},30726:e=>{"use strict";e.exports=a},77756:e=>{"use strict";e.exports=i}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="";var l={};return r.p=window.jimuConfig.baseUrl,(()=>{"use strict";r.r(l),r.d(l,{default:()=>d});var e,t,s,n=r(48891),i=r(23137),a=r(77756);!function(e){e.ResultPanel="Result_Panel",e.OtherWidgets="Other_Widgets"}(e||(e={})),function(e){e.Style1="Style1",e.Style2="Style2"}(t||(t={})),function(e){e.None="",e.Init="init",e.Loading="loading",e.Loaded="loaded",e.Warning="warning",e.Error="error"}(s||(s={}));var o=r(30726);const c={searchResult:"Search result",arrangementStyle:"Arrangement style",showSearchResult:"Show search results in",resultPanel:"Result panel",otherWidgets:"Other widgets",autoSelect:"Auto select the first result",redirectSearchResult:"Redirect if search result is not empty",notSetCorrectle:"The search or display field is not set correctly.",selectedField:"{fieldNumber} Selected",searchExample:"Example: {url}",locatorSourceErrorHint:"The URL you entered is invalid or inaccessible",locatorUrlError:"Locator URL is not set correctly",maximumResults:"Maximum display results per source",outputDsLabel:"{label} result",searchBoxTip:"Search box",searchIconTip:"Search icon"};var u=r(34796);const g=t=>{const s=o.hooks.useTranslate(c,o.defaultMessages,n.defaultMessages),i=(0,u.useTheme)(),r=n.css`
    .check-box-label {
      color: ${i.colors.palette.dark[800]}
    }
    .search-setting-con {
      padding-left: 0;
      padding-right: 0;
    }
    .divider-line {
      padding-bottom: 0;
    }
    .checkbox-con .jimu-widget-setting--row-label{
      max-width: 100%;
    }
    .cursor-pointer {
      cursor: pointer;
    }
  `,{config:l,id:g,useDataSources:d,onSettingChange:S}=t,{searchResultView:h,hint:p,resultMaxNumber:m,linkParam:x,isAutoSelectFirstResult:f}=l,[b,v]=n.React.useState(!1),[R,j]=n.React.useState(!1),[y,C]=n.React.useState(m),[w,T]=n.React.useState((0,n.Immutable)({}));n.React.useEffect((()=>{k()}),[l]);const k=()=>{const e={maxSuggestions:null==l?void 0:l.maxSuggestions,isUseCurrentLoation:null==l?void 0:l.isUseCurrentLoation,isShowRecentSearches:null==l?void 0:l.isShowRecentSearches,recentSearchesMaxNumber:null==l?void 0:l.recentSearchesMaxNumber};T((0,n.Immutable)(e))},O=(e,t)=>{S({id:g,config:l.setIn(e,t)})},I=e=>0===(null==e?void 0:e.length)||Number(e)&&Number(e)>0;return(0,n.jsx)(a.SettingSection,{title:s("generalSearchOption"),css:r},(0,n.jsx)(a.SearchGeneralSetting,{id:g,hint:p,onSettingChange:e=>{O(["hint"],e)}}),(0,n.jsx)("div",null,(0,n.jsx)(a.SettingSection,{className:"search-setting-con"},(0,n.jsx)(a.SettingRow,{role:"group","aria-label":s("searchSuggestion")},(0,n.jsx)(a.SettingCollapse,{label:s("searchSuggestion"),isOpen:b,onRequestOpen:()=>v(!0),onRequestClose:()=>v(!1),level:1},(0,n.jsx)(a.SearchSuggestionSetting,{id:g,settingConfig:w,onSettingChange:e=>{if(!e)return!1;const t=l.merge(e);S({id:g,config:t})}})))),b&&(0,n.jsx)(a.SettingSection,{className:"divider-line"})),(0,n.jsx)(a.SettingRow,{role:"group","aria-label":s("searchResult")},(0,n.jsx)(a.SettingCollapse,{label:s("searchResult"),isOpen:R,onRequestOpen:()=>j(!0),onRequestClose:()=>j(!1),level:1},(0,n.jsx)(a.SettingRow,{label:s("resultPanel"),className:"mt-2"},(0,n.jsx)(o.Switch,{title:s("resultPanel"),checked:h===e.ResultPanel,onChange:t=>{(t=>{const s=t?e.ResultPanel:e.OtherWidgets;O(["searchResultView"],s)})(h===e.OtherWidgets)}})),h===e.ResultPanel&&(0,n.jsx)(a.SettingRow,{flow:"wrap",className:"checkbox-con",label:s("maximumResults")},(0,n.jsx)(o.TextInput,{"aria-label":s("maximumResults"),size:"sm",value:y,onChange:e=>{const t=e.target.value;I(t)&&C(t)},onAcceptValue:e=>{e||C(e=m||6),I(e)&&O(["resultMaxNumber"],Number(e))},className:"w-100"})),h===e.ResultPanel&&(0,n.jsx)(a.SettingRow,null,(0,n.jsx)("div",{className:"cursor-pointer d-flex align-items-center",onClick:e=>{O(["isAutoSelectFirstResult"],!f)},"aria-label":s("autoSelect")},(0,n.jsx)(o.Checkbox,{checked:f,title:s("autoSelect"),className:"mr-1"}),(0,n.jsx)("span",{className:"check-box-label flex-grow-1 ml-1"},s("autoSelect")))),h===e.OtherWidgets&&(0,n.jsx)(a.SettingRow,{className:"d-block",flow:"wrap",label:s("redirectSearchResult")},(0,n.jsx)(a.LinkSelector,{onSettingConfirm:e=>{e&&O(["linkParam"],e)},linkParam:x,useDataSources:d,widgetId:g,hiddenLinks:(0,n.Immutable)([n.LinkType.WebAddress,n.LinkType.PrintPreview]),openTypes:(0,n.Immutable)([a.OpenTypes.CurrentWindow])})))))},d=e=>{const{config:t,id:s,portalUrl:o,onSettingChange:r,useDataSources:l}=e,c=n.css`
    .suggestion-setting-con  {
      padding-bottom: 0;
    }
  `,u=e=>{var t;const s=[];return null===(t=null==e?void 0:e.datasourceConfig)||void 0===t||t.forEach((e=>{(null==e?void 0:e.searchServiceType)===a.SearchServiceType.GeocodeService&&s.push(null==e?void 0:e.useUtility)})),s};return(0,n.jsx)("div",{className:"widget-setting-search jimu-widget-search",css:c},(0,n.jsx)(a.SearchDataSetting,{id:s,portalUrl:o,useDataSources:l,createOutputDs:!0,onSettingChange:(e,n)=>{if(!e)return!1;const a=(0,i.getAppConfigAction)(),o=null==t?void 0:t.setIn(["datasourceConfig"],e);let r={id:s,config:o};(null==n?void 0:n.isWidgetJsonDsChanged)&&(null==n?void 0:n.dsInWidgetJson)&&(r=Object.assign(Object.assign({},r),null==n?void 0:n.dsInWidgetJson)),a.editWidget(r).exec()},onOutputDsSettingChange:(e,n,a)=>{if(!n)return!1;const o=null==t?void 0:t.setIn(["datasourceConfig"],n);let r={id:s,config:o,useUtilities:u(o)};(null==a?void 0:a.isWidgetJsonDsChanged)&&(null==a?void 0:a.dsInWidgetJson)&&(r=Object.assign(Object.assign({},r),null==a?void 0:a.dsInWidgetJson)),(0,i.getAppConfigAction)().editWidget(r,e).exec()},datasourceConfig:null==t?void 0:t.datasourceConfig,searchDataSettingType:a.SearchDataType.Both}),(0,n.jsx)(g,{id:s,config:t,onSettingChange:r,useDataSources:l}))}})(),l})())}}}));